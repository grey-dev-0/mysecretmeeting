(function(){var i=new Vue({el:"#app",name:"MySecretMeeting",data:{roomId:qrCode,iceServers:iceServers,peers:[],signalingChannel:null,localStream:null},computed:{cells:function(){return this.peers.length+1}},methods:{initSignalingChannel:function(e){this.signalingChannel=new WebSocket(baseUrl.replace(/^https?/,"wss")+"/websocket");this.signalingChannel.onopen=function(){i.signalingChannel.send(JSON.stringify({action:"init",code:e}))};this.addSignalingListeners()},addSignalingListeners:function(){this.signalingChannel.onmessage=function(e){var n=JSON.parse(e.data);switch(n.action){case"init":i.roomId=n.code;i.$nextTick(function(){if(n.local)i.$refs.qr.initQrButtons();i.initPeer(n.id,n.local)});break;case"offer":i.$refs["p-"+n.senderId][0].handleOffer(n.offer,n.senderId);break;case"answer":i.$refs["p-"+n.senderId][0].handleAnswer(n.answer);break;case"candidate":i.$refs["p-"+n.senderId][0].handleCandidate(n.candidate);break}}},initPeer:function(e,n){this.peers.push({id:e,local:n})}}})})();